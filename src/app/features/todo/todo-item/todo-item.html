<div class="max-w-4xl mx-auto group flex items-start gap-4 p-5 mb-4 
         bg-card/70 backdrop-blur-sm
         border border-ghost/60 rounded-2xl
         shadow-sm hover:shadow-lg
         hover:-translate-y-1
         hover:border-primary/40
         transition-all duration-300 ease-out" [class.opacity-60]="todo().completed"
  [class.bg-muted/20]="todo().completed">

  <!-- Selection Checkbox (Bulk Actions) -->
  <div class="relative flex items-center justify-center w-5 h-5 mt-1.5 shrink-0">
    <input type="checkbox" [checked]="isSelected()" (change)="onSelectToggle($event)"
      class="appearance-none w-5 h-5 rounded-md border-2 border-primary/20 checked:bg-primary/20 checked:border-primary transition-all duration-200 cursor-pointer hover:border-primary/40 focus:ring-2 focus:ring-primary/20 focus:outline-none">
    <svg class="absolute w-3 h-3 text-primary pointer-events-none opacity-0 scale-50 transition-all duration-200"
      [class.opacity-100]="isSelected()" [class.scale-100]="isSelected()" fill="none" stroke="currentColor"
      viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
    </svg>
  </div>

  <!-- Checkbox -->
  <div class="relative flex items-center justify-center w-6 h-6 mt-1 shrink-0 cursor-pointer"
    (click)="toggleCompletion()">

    <input type="checkbox" [checked]="todo().completed" class="peer appearance-none w-6 h-6 rounded-full border-2
             border-primary/30
             checked:bg-primary checked:border-primary
             transition-all duration-300 cursor-pointer">

    <svg class="absolute w-4 h-4 text-white pointer-events-none
             opacity-0 scale-50
             
             peer-checked:opacity-100
             peer-checked:scale-100
             transition-all duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
    </svg>
  </div>

  <!-- Content -->
  <div class="flex-1 min-w-0">

    <!-- Title + Tags -->
    <div class="flex items-center gap-2 mb-2 flex-wrap">

      <h3 class="font-semibold text-base text-foreground truncate
               transition-all duration-300" [class.line-through]="todo().completed"
        [class.text-muted-foreground]="todo().completed">
        {{todo().title}}
      </h3>

      <!-- Priority -->
      <span
        [class]="'px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border shadow-sm transition-all duration-200 ' + getPriorityClasses()">
        {{todo().priority}}
      </span>

      <!-- Category -->
      <span class="flex items-center gap-1 text-[11px] font-medium px-2 py-0.5 rounded-full bg-muted/40"
        [class]="getCategoryColor()">

        <span class="w-1.5 h-1.5 rounded78-full bg-current animate-pulse"></span>
        {{todo().category}}
      </span>
    </div>

    <!-- Description -->
    @if (todo().description) {
    <p class="text-sm text-muted-foreground line-clamp-2 mb-2 transition-all duration-300"
      [class.line-through]="todo().completed">
      {{todo().description}}
    </p>
    }

    <!-- Created Date -->
    <div class="flex items-center gap-3 text-[11px] text-muted-foreground/70 font-medium">
      <span class="flex items-center gap-1">
        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        {{todo().createdAt | date:'MMM d, h:mm a'}}
      </span>
    </div>
  </div>

  <!-- Actions -->
  <div class="flex items-center gap-1
           opacity-0 translate-x-2
           group-hover:opacity-100
           group-hover:translate-x-0
           transition-all duration-300">

    <button (click)="editTodo(todo().id)" class="p-2 text-muted-foreground
             hover:text-primary
             hover:bg-primary/10
             active:scale-90
             rounded-xl transition-all duration-200" aria-label="Edit todo">

      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
      </svg>
    </button>

    <button class="p-2 text-muted-foreground
             hover:text-destructive
             hover:bg-destructive/10
             active:scale-90
             rounded-xl transition-all duration-200" (click)="onRemove()" aria-label="Delete todo">

      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
      </svg>
    </button>
  </div>
</div>